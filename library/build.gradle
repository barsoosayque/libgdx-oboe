plugins {
    id "org.jetbrains.kotlin.android" version "$kotlinVersion"
}

apply plugin: "com.android.library"

ext {
    bintrayRepo = 'github'
    bintrayName = 'libgdx-oboe'

    publishedGroupId = 'com.github.barsoosayque'
    libraryName = 'libGDX Oboe'
    artifact = 'libgdxoboe'

    libraryDescription = 'libGDX audio replacement for Android (API 16+) built on top of Oboe.'

    siteUrl = 'https://github.com/barsoosayque/libgdx-oboe'
    gitUrl = 'https://github.com/barsoosayque/libgdx-oboe.git'

    libraryVersion = '0.2.4'

    developerId = 'barsoosayque'
    developerName = 'barsoosayque'
    developerEmail = 'shtoshich@gmail.com'

    licenseName = 'The MIT License'
    licenseUrl = 'https://opensource.org/licenses/MIT'
    allLicenses = ["MIT"]
}

configurations { natives }
sourceCompatibility = 1.6

dependencies {
    implementation "com.badlogicgames.gdx:gdx-backend-android:$gdxVersion"
    implementation "org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion"
}

android {
    buildToolsVersion androidBuildToolsVersion
    compileSdkVersion androidSdkVersion
    ndkVersion androidNdkVersion
    sourceSets.main {
        manifest.srcFile 'AndroidManifest.xml'
        java.srcDirs = ['src/kotlin']
        jni.srcDirs = ['src/cpp']
    }
    defaultConfig {
        minSdkVersion 16
        targetSdkVersion androidSdkVersion
        ndk { abiFilters 'x86', 'x86_64', 'armeabi-v7a', 'arm64-v8a' }
        externalNativeBuild {
            cmake {
                cppFlags "-std=c++17 -O3 -DCMAKE_BUILD_TYPE=Release -DNDEBUG"
            }
        }
        consumerProguardFiles 'proguard-rules.pro'
    }
    externalNativeBuild {
        cmake {
            path "CMakeLists.txt"
        }
    }
}